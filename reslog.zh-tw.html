<?xml version="1.0" encoding="Big5" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-tw">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=Big5" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="author" content="依瑪貓" />
<meta name="copyright" content="&copy; 2001-2007 依瑪貓。" />
<meta name="keywords" content="DNS 反查, HostNameLookups, Apache, Analog, 記錄檔" />
<link rel="alternate" type="application/xhtml+xml" href="reslog.zh-cn.html"
     hreflang="zh-cn" title="&#31616;体中文" />
<link rel="alternate" type="application/xhtml+xml" href="reslog.en.html"
     hreflang="en-us" title="English" />
<link rel="author" href="mailto:imacat&#64;mail.imacat.idv.tw" />
<title>reslog 3.10 版</title>
</head>
<body>

<address>
    <span>正體中文</span> |
    <span xml:lang="zh-cn"><a href="reslog.zh-cn.html"
        title="切&#25442;到本&#39029;的&#31616;体中文版。"
        hreflang="zh-cn">&#31616;体中文</a></span> |
    <span xml:lang="en-us"><a href="reslog.en.html"
        title="Switch to the English version of this page."
        hreflang="en-us">English</a></span>
</address>
<hr />


<h1><samp>reslog</samp> 3.10 版</h1>


<div class="body">

<h2>最新消息</h2>

<dl>

<dt>2007-07-22</dt>

<dd><samp>reslog</samp> 最新版本 3.10 。說明文件修正。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.10.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.10 版</a>。</dd>


<dt>2007-07-21</dt>

<dd><samp>reslog</samp> 最新版本 3.09 。版權更新為 <a href="http://www.gnu.org/licenses/gpl-3.0.html" hreflang="en" xml:lang="en"><abbr title="GNU General Public License version 3">GPLv3</abbr></a> ，及多項問題修正。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.09.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.09 版</a>。</dd>


<dt>2005-05-22</dt>

<dd><samp>reslog</samp> 最新版本 3.08 。說明文件修正。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.08.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.08 版</a>。</dd>


<dt>2005-05-22</dt>

<dd><samp>reslog</samp> 最新版本 3.07 。重整程式碼，以便在更多平台上執行。目前可在下列平台上執行： Linux 、 MSWin32 、 cygwin 、 Solaris 、 FreeBSD 與 MacOSX Darwin 。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.07.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.07 版</a>。</dd>


<dt>2005-05-16</dt>

<dd><samp>reslog</samp> 最新版本 3.06 。重整測試程式，以使測試結果更正確、有效。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.06.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.06 版</a>。</dd>


<dt>2005-05-08</dt>

<dd><samp>reslog</samp> 最新版本 3.05 。修正 <samp>STDIN</samp> 不可用時會產生錯誤的問題。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.05.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.05 版</a>。</dd>


<dt>2005-05-08</dt>

<dd><samp>reslog</samp> 最新版本 3.04 。修正載入 <samp>File::MMagic</samp> 時的別字。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.04.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.04 版</a>。</dd>


<dt>2005-05-08</dt>

<dd><samp>reslog</samp> 最新版本 3.03 。預設安裝目錄改回到 <samp>/sbin</samp> ，加上 <samp>make upgrade</samp> 以刪除舊版檔案，並解決了之前檔案鎖定方法不一的問題。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.03.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.03 版</a>。</dd>


<dt>2005-05-02</dt>

<dd><samp>reslog</samp> 最新版本 3.02 。反查程式現在與主程式互相獨立，在 <samp>MSWin32</samp> 與 <samp>cygwin</samp> 上測試執行無誤，並解決了好幾個小問題。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.02.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.02 版</a>。</dd>


<dt>2005-04-26</dt>

<dd><samp>reslog</samp> 最新版本 3.01 。修正了一個嚴重的錯誤，錯使 <samp>--suffix</samp> 與 <samp>--trim-suffix</samp> 處理了錯誤的檔尾。若你下載安裝了 3.01 版，請立即昇級更新。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.01.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.01 版</a>。</dd>


<dt>2005-04-26</dt>

<dd><samp>reslog</samp> 最新版本 3.00 。我用物件導向模式，從頭重寫。新加上 ithreads 多線程功能，大幅加快執行速度。支援 bzip2 壓縮檔。支援用 <samp>gzip</samp> 或 <samp>bzip2</samp> 程式解壓縮，不需安裝 <samp>Compress::Zlib</samp> 和 <samp>Compress::Bzip2</samp> 模組（不建議使用）。可先裁掉某些檔尾，再加上我們的檔尾，以便和其他記錄檔處理程式一起作業。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog-3.00.tar.gz" type="application/x-gzip">下載 <samp>reslog</samp> 3.00 版</a>。</dd>


<dt>2002-09-18</dt>

<dd><samp>reslog.pl</samp> 最新版本 2.1.0dev2 。本版修正了幾個說明文件的錯誤，並把 <a href="http://sourceforge.net/" hreflang="en">SourceForge</a> 加進 <samp>reslog.pl</samp> 的下載網址中。妳可以把它當做<q>SourceForge 紀念版</q>。原則上，不需要急著昇級。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog.pl-2.1.0dev2.tar.gz" type="application/x-gzip">下載 <samp>reslog.pl</samp> 2.1.0dev2 版</a>。</dd>


<dt>2002-09-17</dt>

<dd>好消息！ <samp>reslog.pl</samp> 已開始架設於 <a href="http://sourceforge.net/projects/reslog/" hreflang="en">SourceForge</a> 囉！（雖然我幾乎還完全搞不清楚要怎麼架&hellip;摸索中&hellip; ^^; ）</dd>


<dt>2002-08-31</dt>

<dd><samp>reslog.pl</samp> 最新版本 2.1.0dev1 。本版修正了無法在 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 5.8.0 執行的錯誤。我暫時還把她當成是<q>dev</q>研發版，因為我想在 2.1.0 正式版的時候，支援 <a href="http://search.cpan.org/dist/Compress-Bzip2/" hreflang="en"><samp>Compress::Bzip2</samp></a> 與 <a href="http://search.cpan.org/dist/ExtUtils-MakeMaker/" hreflang="en"><samp>ExtUtils::MakeMaker</samp></a> 。不過她其實很穩定。<a href="ftp://ftp.imacat.idv.tw/pub/reslog/reslog.pl-2.1.0dev1.tar.gz" type="application/x-gzip">下載 <samp>reslog.pl</samp> 2.1.0dev2 版</a>。</dd>

</dl>


<h2>說明</h2>

<p><samp>reslog</samp> 是記錄檔的反查程式，用來反查 <a href="http://httpd.apache.org/" hreflang="en">Apache</a> 記錄檔 <abbr title="internet protocol">IP</abbr> 的主機名稱。查過後，可以套用像 <a href="http://analog.cx/" hreflang="en">Analog</a> 之類的記錄檔統計程式。妳可以把它當做 Apache <samp>HostNameLookups</samp> 指令的替代品，每天一次反查當天所有的 <abbr title="internet protocol">IP</abbr> 。</p>


<h2>注意事項</h2>

<ul>

<li>反查網域名稱<em>很耗時間</em>。時間主要耗在查詢上：防火牆過濾網路封包，網域名稱伺服器設錯、沒有開機、位在慢速網路上、等級太低反應慢、網路塞車&hellip;等。這些外部因素，都不是程式本身能控制的。</li>

<li>若程式半途中斷，如按了 <samp>Ctrl-Break</samp> ，可能會殘餘一個暫時工作檔。下次執行時碰到殘存的暫時工作檔，程式會拒絕執行跳出。請先處理殘存的暫時工作檔。妳可以把暫時工作檔當成原來的記錄檔來用，重新反查。</li>

<li>本程式需要很多暫存資料的空間。硬碟和記憶體比起來，價格便宜，用起來也比較省，所以我用硬碟暫存。這個程式需要原記錄檔兩倍以上的硬碟空間，才能執行（用記憶體暫存的話要用十倍）。請檢查硬碟空間夠不夠。</li>

<li><samp>reslog</samp> 尚未支援 <abbr title="internet protocol version 6">IPv6</abbr> 。</li>

</ul>


<h2>系統需求</h2>

<ol>

<li><acronym title="Practical Extraction and Reporting Language">Perl</acronym> 5.8.0 以上。新版的 <samp>reslog</samp> 用多線程加速反查，要用到 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 5.8.0 之後的新 ithread 多線程模式。你若不想用多線程功能，可以不用，不過程式碼本身，還是要用到 ithread 。若你用的是 5.8.0 以前的 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 版本，請昇級你的 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 。你可以輸入 <samp>perl -v</samp> 查詢你目前的 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 版本。如果你沒有 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 或需要昇級，可以到 <a href="http://www.perl.com/" hreflang="en"><acronym title="Practical Extraction and Reporting Language">Perl</acronym> 網站</a>下載安裝最新版 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 。若妳是用 MSWin32 ，可以到 <a href="http://www.activestate.com/" hreflang="en">ActiveState 公司</a>下載 ActivePerl 安裝。</li>

<li>需搭配的 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 模組：無。</li>

<li>選配的 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 模組：

<dl>
<dt><a href="http://search.cpan.org/dist/File-MMagic/" hreflang="en"><samp>File::MMagic</samp></a></dt>

<dd>這是檢查檔案類型用的。若沒有安裝， <samp>reslog</samp> 會試著去找 <samp>file</samp> 程式代替。若還找不到， <samp>reslog</samp> 會改用檔尾（副檔名）判斷檔案類型。這時若從標準輸入讀檔， <samp>reslog</samp> 會無法判斷。  MSWin32 使用者可以由 <a href="http://gnuwin32.sourceforge.net/" hreflang="en-us">GnuWin32 網站</a>下載 <samp>file.exe</samp> 程式。請確認下載後，存檔在系統的路徑下，檔名為 <samp>file.exe</samp> 。</dd>

<dt><a href="http://search.cpan.org/dist/Compress-Zlib/" hreflang="en"><samp>Compress::Zlib</samp></a></dt>

<dd>這是處理 gzip 壓縮檔用的，只有在處理 gzip 壓縮檔才會用到。若要用時沒有安裝， <samp>reslog</samp> 會試著改用 <samp>gzip</samp> 程式代替。若還找不到， <samp>reslog</samp> 就無法執行。若你是 ActivePerl MSWin32 使用者，可以用 <samp>ppm install Compress::Zlib</samp> 安裝，或由 <a href="http://www.gzip.org/" hreflang="en">gzip 網站</a>下載 <samp>gzip.exe</samp>。請確認下載後，存檔在系統的路徑下，檔名為 <samp>gzip.exe</samp> 。</dd>

<dt><a href="http://search.cpan.org/dist/Compress-Bzip2/" hreflang="en"><samp>Compress::Bzip2</samp></a> 第二版以上</dt>

<dd>這是處理 bzip2 壓縮檔用的，只有在處理 bzip2 壓縮檔才會用到。若要 用時沒有安裝， <samp>reslog</samp> 會試著改用 <samp>bzip2</samp> 程式代替。若還找不到， <samp>reslog</samp> 就無法執行。到我寫這一篇說明的時候為止， ActivePerl MSWin32 的 <abbr title="Programmer&rsquo;s Package Manager">PPM</abbr> 模組庫堻還沒有 <samp>Compress::Bzip2</samp> 。不過 MSWin32 的使用者還是可以由 <a href="http://www.bzip.org/" hreflang="en">bzip2 網站</a> 下載 <samp>bzip2.exe</samp> 。請確認下載後，存檔在系統的路徑下，檔名為 <samp>bzip2.exe</samp> 。</dd>

<dt><a href="http://search.cpan.org/dist/TermReadKey/" hreflang="en"><samp>Term::ReadKey</samp></a></dt>

<dd>這是顯示進度列用的，若沒有安裝，就不會顯示進度列。此外不會有任何問題。進度列可以讓你對 <samp>reslog</samp> 的工作進度一目瞭然。</dd>
</dl>

若沒有上列 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 模組，請到 <a href="http://search.cpan.org/" hreflang="en"><abbr title="Comprehensive Perl Archive Network">CPAN</abbr> 程式庫</a> 下載安裝。</li>
</ol>


<h2>下載</h2>

<p><samp>reslog</samp> 的官方網站在：</p>

<ul>
<li><a href="http://reslog.sourceforge.net/">SourceForge 上的 <samp>reslog</samp> 網站。</a></li>

<li><a href="https://sourceforge.net/projects/reslog/" hreflang="en"><samp>reslog</samp> SourceForge 專案頁。</a></li>

<li><a href="http://search.cpan.org/~imacat/reslog/" hreflang="en"><samp>reslog</samp> <abbr title="Comprehensive Perl Archive Network">CPAN</abbr> 專案頁。</a></li>

<li><a href="http://www.imacat.idv.tw/tech/reslog.html">旅舍依瑪 <samp>reslog</samp> 網頁</a></li>
</ul>

<p>最新版 <samp>reslog</samp> 可由下列位址下載：</p>

<ul>
<li><a href="https://sourceforge.net/project/showfiles.php?group_id=62500" hreflang="en"><samp>reslog</samp> SourceForge 下載頁。</a></li>

<li><a href="http://search.cpan.org/~imacat/reslog/" hreflang="en"><samp>reslog</samp> <abbr title="Comprehensive Perl Archive Network">CPAN</abbr> 專案頁。</a></li>

<li><a href="ftp://ftp.imacat.idv.tw/pub/reslog/">旅舍依瑪 <abbr title="File Transfer Protocol">FTP</abbr> 站。</a></li>
</ul>

<p>依瑪貓的 <abbr title="Pretty Good Privacy">PGP</abbr> 公鑰在：</p>

<ul>
<li><a href="http://reslog.sourceforge.net/pgpkey.asc"><samp>reslog</samp> SourceForge 網站上的依瑪貓 <abbr title="Pretty Good Privacy">PGP</abbr> 公鑰。</a></li>

<li><a href="http://www.imacat.idv.tw/me/pgpkey.asc">旅舍依瑪上的依瑪貓 <abbr title="Pretty Good Privacy">PGP</abbr> 公鑰。</a></li>
</ul>


<h2>安裝</h2>


<p>其實， <samp>reslog</samp> 根本不用安裝。直接跑就是了。 ^_*&rsquo;</p>

<p>好吧，如果你不給它安裝個一下，就會輾轉難眠的話，那就請看以下的安裝指南吧。再次強調，妳可以不用看以下的安裝指南。直接跑就是了。</p>

<p>從第三版起， <samp>reslog</samp> 改用 <acronym title="Practical Extraction and Reporting Language">Perl</acronym> 標準的 <a href="http://search.cpan.org/dist/ExtUtils-MakeMaker/" hreflang="en"><samp>ExtUtils::MakeMaker</samp></a> 安裝，程序如下：</p>

<blockquote><pre>
% perl Makefile.PL
% make
% make test
% make install
</pre></blockquote>

<p>在 <samp>make install</samp> 前，請先確認你有在安裝目錄存檔的權限。通常這時後都要切到 <samp>root</samp> ，才能安裝存檔。</p>

<p>如果你是用 MSWin32 下的 ActivePerl ， <samp>make</samp> 請改用 <samp>nmake</samp> 。 <a href="ftp://ftp.microsoft.com/Softlib/MSLFILES/nmake15.exe" type="application/x-dosexec"><samp>nmake</samp> 可由微軟的 <abbr title="File Transfer Protocol">FTP</abbr> 站下載。</a></p>

<p>若要安裝到其它地方，請設定好 <samp>PREFIX</samp> 。例如，一個一般使用者，要安裝在自己的目錄下時：</p>

<blockquote><pre>
% perl Makefile.PL PREFIX=/home/jessica
</pre></blockquote>

<p>要知道更多安裝選項的細節，請參閱 <samp>ExtUtils::MakeMaker</samp> 的說明（請執行 <samp>perldoc ExtUtils::MakeMaker</samp> ）。</p>

<p>若你是由 <samp>reslog.pl</samp> 3.02 以前的版本昇級，請參閱 <samp>UPGRADE.zh-tw</samp> 檔的昇級說明。</p>


<h2>命令列參數</h2>

<pre>
./reslog [參數] [記錄檔&hellip;]
./reslog [-h|-v]
</pre>


<dl>
<dt><var>記錄檔</var></dt>

<dd>要反查的記錄檔。若沒有指定，會從標準輸入讀記錄檔，再寫到標準輸出。妳也可以設定成<q><samp>-</samp></q>，來從標準輸入讀記錄檔。可同時指定好幾個檔案，若其中有標準輸入，會通通寫到標準輸出。支援 gzip 或 bzip2 壓縮檔。</dd>


<dt>-o, --override=<var>模式</var></dt>

<dd>如果有同名的反查結果檔，該怎麼辦。目前有下列模式：


<dl>
<dt>o, overwrite</dt>

<dd>蓋掉舊檔。</dd>


<dt>a, append</dt>

<dd>和舊檔加在一起。</dd>


<dt>f, fail</dt>

<dd>結束程式，以免不小心破壞舊檔。預設是結束程式。</dd>
</dl>
</dd>


<dt>-k, --keep=<var>模式</var></dt>

<dd>原記錄檔要怎麼處理。目前有下列模式：


<dl>
<dt>a, all</dt>

<dd>保留原檔。</dd>


<dt>r, restart</dt>

<dd>反查後，原記錄檔歸零。預設是原記錄檔歸零。</dd>


<dt>d, delete</dt>

<dd>反查後，刪除原記錄檔。</dd>
</dl>
</dd>


<dt>-s, --suffix=<var>檔尾</var></dt>

<dd>反查結果檔要加上的檔尾。預設的檔尾是<q><samp>.resolved</samp></q>。</dd>


<dt>-t, --trim-suffix=<var>檔尾</var></dt>

<dd>加上我們的檔尾前，先去掉的原檔檔尾。預設是不去檔尾。若你用好幾個記錄檔處理程式處理記錄檔，可以用這個選項，去掉之前程式加的檔尾。</dd>


<dt>-n, --num-threads=<var>線程數</var></dt>

<dd>反查時，同時執行的線程數。預設值是 10 。若不要用多線程反查，請設為 0 。系統本身要支援多線程。若系統本身不支援多線程，本選項沒有作用。</dd>


<dt>-c, --stdout</dt>

<dd>把結果輸出到標準輸出。</dd>


<dt>-d, --debug</dt>

<dd>顯示詳細的執行過程。</dd>


<dt>-q, --quiet</dt>

<dd>沒事不要吵。 :p</dd>


<dt>-h, --help</dt>

<dd>顯示程式說明。</dd>


<dt>-v, --version</dt>

<dd>顯示程式版本。</dd>
</dl>


<h2>版權聲明</h2>

<p>版權所有 &copy; 2001-2007 依瑪貓。依瑪貓保有所有權利。</p>

<p>本程式是自由軟體，您可以遵照自由軟體基金會 (Free Software Foundation) 出版的 <cite><acronym title="GNU&rsquo;s Not UNIX">GNU</acronym> 通用公共許可證</cite>條款 (<cite><acronym title="GNU&rsquo;s Not UNIX">GNU</acronym> General Public License</cite>) 第三版來修改和重新發佈這一程式，或者自由選擇使用任何更新的版本。</p>

<p>發佈這一程式的目的是希望它有用，但沒有任何擔保。甚至沒有適合特定目的而隱含的擔保。更詳細的情況請參閱 <cite><acronym title="GNU&rsquo;s Not UNIX">GNU</acronym> 通用公共許可證</cite>。</p>

<p>您應該已經和程式一起收到一份 <cite><acronym title="GNU&rsquo;s Not UNIX">GNU</acronym> 通用公共許可證</cite>的副本。如果還沒有，參閱<samp>&lt;<a href="http://www.gnu.org/licenses/" hreflang="en">http://www.gnu.org/licenses/</a>&gt;</samp>。</p>


<h2>版本紀錄</h2>

<p>請閱讀 <samp>Changes</samp> 檔，查看程式的演變、新增的功能和修補的錯誤。</p>


<h2>錯誤回報</h2>

<p><samp>reslog</samp> 有一個<a href="https://lists.sourceforge.net/lists/listinfo/reslog-users" hreflang="en">郵件通訊 <samp>reslog-users&#64;lists.sourceforge.net</samp></a> ，若有任何問題、建議、問題回報、修補程式，請寄到郵件通訊上。除非有私人事務，否則請不要直接寫信給我。郵件通訊會自動歸檔，日後若其他人有相同問題，可以直接在通訊舊檔中找到答案，節省大家寶貴的時間。</p>


</div>

<address><a href="mailto:imacat&#64;mail.imacat.idv.tw">依瑪貓</a>，初稿 2001-07-04 ，上次更新日期 2007-07-22</address>


<hr />
<div>
<a href="http://validator.w3.org/check/referer"
    title="本頁的 HTML 驗證結果" hreflang="en"><img
    src="http://www.w3.org/Icons/valid-xhtml11" alt="XHTML 1.1 正確！" /></a>|<a
    href="http://jigsaw.w3.org/css-validator/check/referer"
    title="本頁的 CSS 驗證結果" hreflang="en"><img
    src="http://jigsaw.w3.org/css-validator/images/vcss" alt="CSS 正確！" /></a>|<a
    href="http://www.w3.org/WAI/wcag1AAA-Conformance"
    title="無障礙三 A 級標準說明" hreflang="en"><img
    src="http://www.w3.org/WAI/wcag1AAA"
    alt="W3C 無障礙網頁規範 1.0 三 A 級標準標章" /></a>
<p>本頁符合 <a href="http://www.w3.org/TR/xhtml11/" hreflang="en"><abbr
    title="Extensible HyperText Markup Language">XHTML</abbr> 1.1</a> /
    <a href="http://www.w3.org/TR/CSS21/" hreflang="en"><abbr
    title="Cascading Style Sheets">CSS</abbr> 2.1</a> /
    <a href="http://www.w3.org/TR/WAI-WEBCONTENT/"
    hreflang="en">無障礙網頁規範 1.0</a> 三 A 級標準</p>
</div>

</body>
</html>
